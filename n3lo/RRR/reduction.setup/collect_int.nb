(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Wolfram 14.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       154,          7]
NotebookDataLength[    102960,       2507]
NotebookOptionsPosition[     97283,       2417]
NotebookOutlinePosition[     97714,       2434]
CellTagsIndexPosition[     97671,       2431]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData["Quit"], "Input",
 CellChangeTimes->{{3.973057115411269*^9, 3.973057115747822*^9}},
 CellLabel->
  "In[824]:=",ExpressionUUID->"0b1271bb-c5e2-4749-a7a4-3f35d89a1ef2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.9730571188138447`*^9, 3.973057125791141*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"ca267460-4739-4a6b-b810-60c4cac8ad60"],

Cell[BoxData["\<\"/Users/cesarecarlomella/Desktop/Physics/Oxford/projects/DY/\
N3LO/RRR/reduction.setup\"\>"], "Output",
 CellChangeTimes->{
  3.973222457101387*^9, 3.973232290222418*^9, 3.973246723372826*^9, {
   3.9736637862551517`*^9, 3.973663788717127*^9}, 3.973664448403146*^9, 
   3.973664736871388*^9, 3.974120045364538*^9, 3.974173755449898*^9, 
   3.974184629999592*^9, 3.9741846779211206`*^9, 3.9741852127172413`*^9, 
   3.974187263321582*^9, 3.9742719287901506`*^9, 3.977197577100214*^9},
 CellLabel->"Out[1]=",ExpressionUUID->"8d3de2d4-10b1-4ca0-a46a-05130a97d239"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"qqVgggLC", "[", "vv", "]"}], " ", "=", " ", 
   RowBox[{
   "Import", "[", "\"\<../rrr.results/qqbVggg_lc/vv/unreduced1.m\>\"", 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"qqVggg", "[", "vv", "]"}], " ", "=", " ", 
   RowBox[{
   "Import", "[", "\"\<../rrr.results/qqbVggg/vv/unreduced1.m\>\"", "]"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.9730571346129427`*^9, 3.973057155156169*^9}, {
  3.9736644500396*^9, 3.97366445524363*^9}, {3.9741200482450867`*^9, 
  3.974120056875675*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"588de2b0-55e9-4371-8d18-14ee09532de5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"lctest", "=", 
   RowBox[{"Coefficient", "[", 
    RowBox[{
     RowBox[{"qqVggg", "[", "vv", "]"}], ",", " ", "Nc", ",", "4"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.9736646018373203`*^9, 3.973664614119631*^9}},
 CellLabel->"In[4]:=",ExpressionUUID->"22b86a2c-7dcb-4812-990b-c880bbe4926a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"ints", "=", 
   RowBox[{"Union", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{
      RowBox[{"qqVggg", "[", "vv", "]"}], ",", " ", "_INT", ",", " ", 
      "\[Infinity]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"intsLC", "=", 
   RowBox[{"Union", "@", 
    RowBox[{"Cases", "[", 
     RowBox[{"lctest", ",", " ", "_INT", ",", " ", "\[Infinity]"}], "]"}]}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lctest2", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"qqVgggLC", "[", "vv", "]"}], "/.", 
     RowBox[{"Nc", "->", " ", "1"}]}], " ", "/.", " ", 
    RowBox[{"gs", "->", "1"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lctest", "=", " ", 
   RowBox[{
    RowBox[{"lctest", "/.", 
     RowBox[{"Nc", "->", " ", "1"}]}], " ", "/.", " ", 
    RowBox[{"gs", "->", "1"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"mat1", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"CoefficientArrays", "[", 
      RowBox[{"lctest", ",", 
       RowBox[{"intsLC", "[", 
        RowBox[{"[", "]"}], "]"}]}], " ", "]"}], "[", 
     RowBox[{"[", "2", "]"}], "]"}], "//", "Normal"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"mat2", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"CoefficientArrays", "[", 
      RowBox[{"lctest2", ",", 
       RowBox[{"intsLC", "[", 
        RowBox[{"[", "]"}], "]"}]}], " ", "]"}], "[", 
     RowBox[{"[", "2", "]"}], "]"}], "//", "Normal"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"(", 
    RowBox[{"mat1", " ", "-", " ", "mat2"}], " ", ")"}], "//", "Together"}], 
  " ", "//", " ", "Union"}]}], "Input",
 CellChangeTimes->{{3.973664696660611*^9, 3.973664697654118*^9}, {
  3.973664742644915*^9, 3.9736647874224043`*^9}, {3.973665242775735*^9, 
  3.9736652428802433`*^9}},
 CellLabel->"In[5]:=",ExpressionUUID->"17e54193-4ed6-4ba6-9f5f-b0f092c175ab"],

Cell[BoxData[
 RowBox[{"{", "0", "}"}]], "Output",
 CellChangeTimes->{3.9736652493963747`*^9, 3.97412008062374*^9, 
  3.974173782633923*^9, 3.974184657785219*^9, 3.974184705566481*^9, 
  3.974185239930743*^9, 3.9741872867739*^9, 3.97427195623472*^9, 
  3.977197598006268*^9},
 CellLabel->"Out[11]=",ExpressionUUID->"2444b787-00d3-4150-bf49-4ecd90cd9c22"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ints", "//", "Length"}]], "Input",
 CellChangeTimes->{{3.973664788712582*^9, 3.97366479538179*^9}, {
  3.973665253797888*^9, 3.973665253915028*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"4e100180-8911-4c9e-9e7e-07717dd1a922"],

Cell[BoxData["164274"], "Output",
 CellChangeTimes->{{3.973664790201098*^9, 3.973664795538455*^9}, 
   3.9736652542023973`*^9, 3.9741200806499243`*^9, 3.974173782662228*^9, 
   3.974184657820282*^9, 3.974184705587432*^9, 3.974185239961746*^9, 
   3.9741872867992783`*^9, 3.97427195626245*^9, 3.97719759804325*^9},
 CellLabel->"Out[12]=",ExpressionUUID->"b380f979-2cf7-4c8d-ba4e-0099de3b8acf"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"mappings", "=", 
    RowBox[{"Import", "[", "\"\<../mappings/mappings.m\>\"", "]"}]}], ";", 
   "\[IndentingNewLine]", 
   RowBox[{"mappings", "=", 
    RowBox[{"mappings", "[", 
     RowBox[{"[", 
      RowBox[{";;", ",", "1"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
   RowBox[{"dispMappings", "=", " ", 
    RowBox[{"Dispatch", "[", "mappings", "]"}]}], ";", "\[IndentingNewLine]", 
   
   RowBox[{
    RowBox[{"Union", "@", 
     RowBox[{"Cases", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ints", "[", 
         RowBox[{"[", "]"}], "]"}], " ", "/.", " ", "dispMappings"}], ",", 
       " ", "_INT", ",", " ", "\[Infinity]"}], "]"}]}], "//", "Length"}]}], 
  "\[IndentingNewLine]", "*)"}]], "Input",
 CellChangeTimes->{{3.974120077952059*^9, 3.9741200861872253`*^9}, {
  3.974120268355315*^9, 3.9741202685013237`*^9}, {3.974121529079421*^9, 
  3.9741215295610027`*^9}, {3.9741846844678183`*^9, 
  3.9741846889716053`*^9}},ExpressionUUID->"6970f6d5-bde2-4d4a-9008-\
16f12132da37"],

Cell[BoxData[
 RowBox[{
  RowBox[{"topos", "=", 
   RowBox[{
    RowBox[{"ints", " ", "/.", " ", 
     RowBox[{
      RowBox[{"INT", "[", 
       RowBox[{"topo_", ",", " ", "a___"}], "]"}], "->", " ", "topo"}]}], "//",
     "Union"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.973057191065168*^9, 3.973057246295019*^9}},
 CellLabel->"In[13]:=",ExpressionUUID->"f91b01ff-eb4c-4127-a531-b969ca9b5ac7"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{
    RowBox[{"qqVgggLC", "[", "vv", "]"}], " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"qqVgggLC", "[", "vv", "]"}], "/.", " ", 
        RowBox[{"gs", " ", "->", " ", "1"}]}], " ", "/.", " ", 
       RowBox[{"Nc", " ", "->", " ", "1"}]}], " ", "/.", " ", 
      RowBox[{
       RowBox[{"Den", "[", "a_", "]"}], "->", " ", 
       RowBox[{"1", "/", "a"}]}]}], " ", "/.", " ", 
     RowBox[{
      RowBox[{"Num", " ", "[", "a_", "]"}], "->", " ", "a"}]}]}], ";", 
   "\[IndentingNewLine]", 
   RowBox[{"mat1", "=", 
    RowBox[{
     RowBox[{
      RowBox[{"CoefficientArrays", "[", 
       RowBox[{
        RowBox[{"qqVgggLC", "[", "vv", "]"}], ",", " ", "intsLC"}], "]"}], "[", 
      RowBox[{"[", "2", "]"}], "]"}], "//", "Normal"}]}], ";", 
   "\[IndentingNewLine]", 
   RowBox[{"mapped", "=", 
    RowBox[{"intsLC", " ", "/.", " ", "dispMappings"}]}], ";", 
   "\[IndentingNewLine]", 
   RowBox[{"intsFinal", "=", 
    RowBox[{"Union", "@", 
     RowBox[{"Cases", "[", 
      RowBox[{"mapped", " ", ",", " ", "_INT", ",", " ", "\[Infinity]"}], 
      "]"}]}]}], ";", "\[IndentingNewLine]", 
   RowBox[{"mat2", " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"CoefficientArrays", "[", 
       RowBox[{"mapped", ",", " ", "intsFinal"}], "]"}], "[", 
      RowBox[{"[", "2", "]"}], "]"}], "//", "Normal"}]}], ";"}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.9730596570523853`*^9, 3.973059771891893*^9}, {
  3.973668010071608*^9, 3.973668011058909*^9}, {3.974175886997766*^9, 
  3.974175961195088*^9}, {3.974176699899597*^9, 3.974176700068609*^9}, {
  3.974184625641694*^9, 
  3.9741846441275063`*^9}},ExpressionUUID->"c638c7c8-d77f-42b3-a601-\
eb3fe57c4b5c"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.9741765251654577`*^9, 
  3.974176553333254*^9}},ExpressionUUID->"f2daea87-329a-4878-a91c-\
cd395541af64"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"buildInfo", "[", "int_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "result", ",", "t", ",", "r", ",", "s", ",", "bin", ",", "scalar", ",", 
      "secID"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"s", " ", "=", 
      RowBox[{"Abs", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"int", " ", "/.", " ", 
            RowBox[{"INT", " ", "->", " ", "List"}]}], ")"}], "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;"}], "]"}], "]"}], " ", "/.", " ", 
         RowBox[{
          RowBox[{"a_", " ", "/;", " ", 
           RowBox[{"a", ">", " ", "0"}]}], " ", "->", " ", "0"}]}], "//", 
        "Total"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"t", " ", "=", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"int", " ", "/.", " ", 
            RowBox[{"INT", " ", "->", " ", "List"}]}], ")"}], "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;"}], "]"}], "]"}], " ", "/.", " ", 
         RowBox[{
          RowBox[{"a_", " ", "/;", " ", 
           RowBox[{"a", "<", "0"}]}], " ", "->", " ", "0"}]}], " ", "/.", " ", 
        RowBox[{
         RowBox[{"a_", " ", "/;", " ", 
          RowBox[{"a", ">", " ", "1"}]}], " ", "->", " ", "1"}]}], "//", 
       "Total"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"r", "=", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"int", " ", "/.", " ", 
           RowBox[{"INT", " ", "->", " ", "List"}]}], ")"}], "[", 
         RowBox[{"[", 
          RowBox[{"2", ";;"}], "]"}], "]"}], " ", "/.", " ", 
        RowBox[{
         RowBox[{"a_", " ", "/;", " ", 
          RowBox[{"a", "<", "0"}]}], " ", "->", " ", "0"}]}], "//", 
       "Total"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"bin", " ", "=", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{"int", " ", "/.", " ", 
         RowBox[{"INT", " ", "->", " ", "List"}]}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ";;"}], "]"}], "]"}]}], " ", ";", "\[IndentingNewLine]", 
     
     RowBox[{"scalar", "=", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"bin", " ", "/.", " ", 
         RowBox[{
          RowBox[{"a_", " ", "/;", " ", 
           RowBox[{"a", "<", "0"}]}], " ", "->", " ", "0"}]}], "  ", "/.", 
        " ", 
        RowBox[{
         RowBox[{"a_", " ", "/;", " ", 
          RowBox[{"a", ">", " ", "1"}]}], " ", "->", " ", "1"}]}], ")"}]}], ";",
      "\[IndentingNewLine]", 
     RowBox[{"secID", "=", 
      RowBox[{"Sum", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"scalar", "[", 
          RowBox[{"[", "i", "]"}], "]"}], 
         RowBox[{"2", "^", 
          RowBox[{"(", 
           RowBox[{"i", "-", "1"}], ")"}]}]}], ",", " ", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "[", "scalar", "]"}]}], "}"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"result", " ", "=", " ", 
      RowBox[{"INT", "[", 
       RowBox[{
        RowBox[{"int", "[", 
         RowBox[{"[", "1", "]"}], "]"}], ",", " ", "t", ",", "r", ",", "s", ",",
         "secID", ",", " ", "bin"}], " ", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "result", "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"intsinfo", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"buildInfo", "[", "#", "]"}], "&"}], "/@", "ints"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.973057338949745*^9, 3.9730574653383837`*^9}, {
   3.973057530980962*^9, 3.9730575329823112`*^9}, {3.973057577615988*^9, 
   3.9730575812699957`*^9}, {3.973059319953764*^9, 3.9730593235535*^9}, 
   3.973059408787162*^9, {3.97305957313343*^9, 3.97305958790786*^9}, 
   3.9730596529686117`*^9, {3.9730597985359097`*^9, 3.97305981582458*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"2ed4a951-93d7-4ec5-8b41-d389f64891b2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"buildInfo", "[", 
  RowBox[{"ints", "[", 
   RowBox[{"[", "1", "]"}], "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.974194171875906*^9, 3.974194177305558*^9}},
 CellLabel->"In[16]:=",ExpressionUUID->"ba2436c4-3e66-440c-9a28-fb9de6aab37a"],

Cell[BoxData[
 RowBox[{"INT", "[", 
  RowBox[{"topo1", ",", "7", ",", "7", ",", "4", ",", "3103", ",", 
   RowBox[{"{", 
    RowBox[{"1", ",", "1", ",", "1", ",", "1", ",", "1", ",", 
     RowBox[{"-", "2"}], ",", "0", ",", 
     RowBox[{"-", "2"}], ",", "0", ",", "0", ",", "1", ",", "1"}], "}"}]}], 
  "]"}]], "Output",
 CellChangeTimes->{3.9741941775094967`*^9, 3.9742719668012333`*^9, 
  3.977197645299892*^9},
 CellLabel->"Out[16]=",ExpressionUUID->"c40e3338-4632-4e1c-b889-4188a4c5d5ac"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"intsinfo", " ", "/.", " ", 
    RowBox[{
     RowBox[{"INT", "[", 
      RowBox[{"topo_", ",", "t_", ",", "r_", ",", "s_", ",", "sec_", ",", 
       RowBox[{"{", "bin__", "}"}]}], "]"}], " ", "->", " ", "r"}]}], "//", 
   "Union"}], "//", "Max"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"intsinfo", " ", "/.", " ", 
    RowBox[{
     RowBox[{"INT", "[", 
      RowBox[{"topo_", ",", "t_", ",", "r_", ",", "s_", ",", "sec_", ",", 
       RowBox[{"{", "bin__", "}"}]}], "]"}], " ", "->", " ", "t"}]}], "//", 
   "Union"}], "//", "Max"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"intsinfo", " ", "/.", " ", 
    RowBox[{
     RowBox[{"INT", "[", 
      RowBox[{"topo_", ",", "t_", ",", "r_", ",", "s_", ",", "sec_", ",", 
       RowBox[{"{", "bin__", "}"}]}], "]"}], " ", "->", " ", "s"}]}], "//", 
   "Union"}], "//", "Max"}]}], "Input",
 CellChangeTimes->{{3.973059834235549*^9, 3.973059839284875*^9}},
 CellLabel->"In[17]:=",ExpressionUUID->"1fc03a5d-3e42-4481-99ee-ccee6ac6be11"],

Cell[BoxData["11"], "Output",
 CellChangeTimes->{
  3.97305940996132*^9, {3.973059812662142*^9, 3.973059839613616*^9}, 
   3.973151444352974*^9, 3.973232298767334*^9, 3.973246730424788*^9, 
   3.973663831135705*^9, 3.9736680241144323`*^9, 3.974122766620432*^9, 
   3.97417382662519*^9, 3.974184716273034*^9, 3.974185281752647*^9, 
   3.974187295567026*^9, 3.974271966871251*^9, 3.9771976453663673`*^9},
 CellLabel->"Out[17]=",ExpressionUUID->"15a39fa8-da04-44ab-9794-f3527337c3bd"],

Cell[BoxData["11"], "Output",
 CellChangeTimes->{
  3.97305940996132*^9, {3.973059812662142*^9, 3.973059839613616*^9}, 
   3.973151444352974*^9, 3.973232298767334*^9, 3.973246730424788*^9, 
   3.973663831135705*^9, 3.9736680241144323`*^9, 3.974122766620432*^9, 
   3.97417382662519*^9, 3.974184716273034*^9, 3.974185281752647*^9, 
   3.974187295567026*^9, 3.974271966871251*^9, 3.977197645413986*^9},
 CellLabel->"Out[18]=",ExpressionUUID->"d46a264d-db51-47f0-94c5-7ed4489b3cc2"],

Cell[BoxData["5"], "Output",
 CellChangeTimes->{
  3.97305940996132*^9, {3.973059812662142*^9, 3.973059839613616*^9}, 
   3.973151444352974*^9, 3.973232298767334*^9, 3.973246730424788*^9, 
   3.973663831135705*^9, 3.9736680241144323`*^9, 3.974122766620432*^9, 
   3.97417382662519*^9, 3.974184716273034*^9, 3.974185281752647*^9, 
   3.974187295567026*^9, 3.974271966871251*^9, 3.977197645464439*^9},
 CellLabel->"Out[19]=",ExpressionUUID->"fceb7096-5dd0-4e85-82a4-a5d0c7ba3393"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"topos", " ", "//", " ", "Length"}]], "Input",
 CellChangeTimes->{{3.973060053385594*^9, 3.973060053792227*^9}, {
  3.974122763398213*^9, 3.9741227648031683`*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"88b19004-5f0b-42db-b273-09173a58c2b1"],

Cell[BoxData["148"], "Output",
 CellChangeTimes->{
  3.973060054139423*^9, 3.973151463244792*^9, 3.973232298820326*^9, 
   3.973246730475396*^9, 3.973663833021109*^9, 3.973668028122171*^9, {
   3.974122766736661*^9, 3.974122766748764*^9}, 3.974173826775956*^9, 
   3.974184716417142*^9, 3.9741852825276127`*^9, 3.974187295685554*^9, 
   3.9742719670037327`*^9, 3.977197645483844*^9},
 CellLabel->"Out[20]=",ExpressionUUID->"96466d48-586f-4b7b-90b0-d37b691c2849"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SecToReduce", " ", "=", " ", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Do", "[", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"fam", " ", "=", " ", 
    RowBox[{"topos", "[", 
     RowBox[{"[", "2", "]"}], "]"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"rankMaxAbs", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
    RowBox[{"dotMax", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
    RowBox[{"IntsInFam", "=", 
     RowBox[{"Union", "@", 
      RowBox[{"Cases", "[", 
       RowBox[{"intsinfo", ",", " ", 
        RowBox[{"INT", "[", 
         RowBox[{"fam", ",", " ", "a___"}], "]"}], ",", "\[Infinity]"}], 
       "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"maxTInFam", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"IntsInFam", " ", "/.", " ", 
        RowBox[{
         RowBox[{"INT", "[", 
          RowBox[{
          "topo_", ",", "t_", ",", "r_", ",", "s_", ",", "sec_", ",", 
           RowBox[{"{", "bin__", "}"}]}], "]"}], " ", "->", " ", "t"}]}], " ",
        "//", "Union"}], " ", "//", "Max"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"tops", " ", "=", " ", 
     RowBox[{"Union", "@", 
      RowBox[{"Cases", "[", 
       RowBox[{"IntsInFam", ",", " ", 
        RowBox[{"INT", "[", 
         RowBox[{"fam", ",", "maxTInFam", ",", "b_", ",", "c_", ",", "sec_", ",", 
          RowBox[{"{", "bin__", "}"}]}], "]"}], ",", "\[Infinity]"}], 
       "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"topSecID", " ", "=", 
     RowBox[{
      RowBox[{"tops", " ", "/.", " ", 
       RowBox[{
        RowBox[{"INT", "[", 
         RowBox[{"fam_", ",", "t_", ",", "r_", ",", "s_", ",", "sec_", ",", 
          RowBox[{"{", "bin__", "}"}]}], "]"}], "->", " ", "sec"}]}], "//", 
      "Union"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"maxRankInTop", "=", 
     RowBox[{
      RowBox[{"tops", " ", "/.", " ", 
       RowBox[{
        RowBox[{"INT", "[", 
         RowBox[{"topos_", ",", "t_", ",", "r_", ",", "s_", ",", "secID_", ",", 
          RowBox[{"{", "bin__", "}"}]}], "]"}], "->", " ", "s"}]}], "//", 
      "Max"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"maxRankInTop", " ", ">", " ", "rankMaxAbs"}], " ", ",", " ", 
      RowBox[{"rankMaxAbs", "=", "maxRankInTop"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"maxRInTop", "=", 
     RowBox[{
      RowBox[{"tops", " ", "/.", " ", 
       RowBox[{
        RowBox[{"INT", "[", 
         RowBox[{"topos_", ",", "t_", ",", "r_", ",", "s_", ",", "secID_", ",", 
          RowBox[{"{", "bin__", "}"}]}], "]"}], "->", " ", "r"}]}], "//", 
      "Max"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"maxRInTop", " ", "-", "  ", "maxTInFam"}], ">", " ", 
       "dotMax"}], " ", ",", " ", 
      RowBox[{"dotMax", "=", 
       RowBox[{"maxRInTop", " ", "-", "  ", "maxTInFam"}]}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"SecToReduce", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{"SecToReduce", ",", 
       RowBox[{"{", 
        RowBox[{
        "fam", ",", "\"\<maxT = \>\"", ",", " ", "maxTInFam", ",", " ", 
         "topSecID", ",", " ", "\"\<max rank =\>\"", ",", " ", "maxRankInTop",
          ",", " ", "\"\<max r =\>\"", ",", " ", "maxRInTop"}], " ", "}"}]}], 
      " ", "]"}]}], ";"}], ",", " ", 
   RowBox[{"{", 
    RowBox[{"fam", ",", " ", "topos"}], "}"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.9730599598527718`*^9, 3.9730599695585012`*^9}, {
  3.9730600477386713`*^9, 3.973060094549041*^9}, {3.973060166422885*^9, 
  3.973060219741647*^9}, {3.973060258625641*^9, 3.973060355131342*^9}},
 CellLabel->"In[21]:=",ExpressionUUID->"7f001aba-1218-479e-97ce-b98e84d923a2"],

Cell[CellGroupData[{

Cell[BoxData[{"rankMaxAbs", "\[IndentingNewLine]", "dotMax"}], "Input",
 CellChangeTimes->{{3.973060357949532*^9, 3.9730603631588793`*^9}},
 CellLabel->"In[23]:=",ExpressionUUID->"bfee7ce4-2033-4e53-a6b6-e988e694595e"],

Cell[BoxData["4"], "Output",
 CellChangeTimes->{
  3.9730603094346533`*^9, {3.973060356633966*^9, 3.973060363791774*^9}, 
   3.97306112814985*^9, 3.97315146632122*^9, 3.97323230008401*^9, 
   3.973246731771785*^9, 3.973663838340085*^9, 3.973668045627995*^9, 
   3.974122833272318*^9, 3.974173833618548*^9, 3.97418472322126*^9, 
   3.974187301339526*^9, 3.97427197370652*^9, 3.977197650684128*^9},
 CellLabel->"Out[23]=",ExpressionUUID->"8baa390f-026e-4ed9-a4dd-0f75407ec848"],

Cell[BoxData["0"], "Output",
 CellChangeTimes->{
  3.9730603094346533`*^9, {3.973060356633966*^9, 3.973060363791774*^9}, 
   3.97306112814985*^9, 3.97315146632122*^9, 3.97323230008401*^9, 
   3.973246731771785*^9, 3.973663838340085*^9, 3.973668045627995*^9, 
   3.974122833272318*^9, 3.974173833618548*^9, 3.97418472322126*^9, 
   3.974187301339526*^9, 3.97427197370652*^9, 3.977197650684598*^9},
 CellLabel->"Out[24]=",ExpressionUUID->"a99d9abe-80d8-442e-9544-b35e3b5c405d"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"IsItSub", "[", 
   RowBox[{"int1_", ",", "int2_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"diff", ",", "sol"}], "}"}], ",", 
    RowBox[{"(*", " ", 
     RowBox[{
     "is", " ", "int1", " ", "a", " ", "sub", " ", "of", " ", "int2"}], 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"diff", "=", 
      RowBox[{"int2", "-", "int1"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"FreeQ", "[", 
        RowBox[{
         RowBox[{"int2", "-", "int1"}], ",", 
         RowBox[{"a_", "/;", 
          RowBox[{"a", "<", "0"}]}]}], "]"}], ",", " ", 
       RowBox[{"sol", " ", "=", " ", "True"}], ",", " ", 
       RowBox[{"sol", " ", "=", " ", "False"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Return", "[", "sol", "]"}], ";"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellLabel->"In[25]:=",ExpressionUUID->"2c7c031f-caa4-4a50-8b37-f1c9f4b7d3c0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SecToReduce", " ", "//", "Length"}]], "Input",
 CellChangeTimes->{{3.97306108744144*^9, 3.973061094808888*^9}},
 CellLabel->"In[26]:=",ExpressionUUID->"d8b7749a-1880-42c5-b8bd-e8c66d8a008b"],

Cell[BoxData["148"], "Output",
 CellChangeTimes->{{3.973061088629833*^9, 3.973061094953776*^9}, 
   3.973151468263906*^9, 3.973232300097603*^9, 3.973246731857641*^9, 
   3.973663841440209*^9, 3.973668048146402*^9, 3.9741228333193398`*^9, 
   3.9741738336452503`*^9, 3.974184723289022*^9, 3.974185289704213*^9, 
   3.974187301364725*^9, 3.9742719737592077`*^9, 3.977197650713072*^9},
 CellLabel->"Out[26]=",ExpressionUUID->"5a6b6188-1027-4b6a-ab04-26ee5c9ee19c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["TOPOS ALL", "Section",
 CellChangeTimes->{{3.9732467395393267`*^9, 3.973246742253577*^9}, {
   3.973673370520643*^9, 3.973673371502865*^9}, 
   3.973673808880735*^9},ExpressionUUID->"445a1698-4636-47e3-ada9-\
a1f23decddde"],

Cell[BoxData[
 RowBox[{"Do", "[", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"topo", "=", "2"}], ";"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"name", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"topt", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"topIds", "=", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"intsTopo", "=", 
     RowBox[{"Union", "@", 
      RowBox[{"Cases", "[", 
       RowBox[{"intsinfo", ",", " ", 
        RowBox[{"INT", "[", 
         RowBox[{"name", ",", "a___"}], "]"}], ",", "\[Infinity]"}], 
       "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Print", "[", 
     RowBox[{"\"\<doing family \>\"", ",", " ", "name"}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "\[IndentingNewLine]", 
     RowBox[{
     "All", " ", "sector", " ", "of", " ", "ints", " ", "in", " ", "topo", " ",
       "1"}], " ", "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"allsecs", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{"intsTopo", " ", "/.", " ", 
         RowBox[{"INT", " ", "->", " ", "List"}]}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{";;", ",", "5"}], "]"}], "]"}], "//", "Union"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "\[IndentingNewLine]", 
     RowBox[{
     "All", " ", "binary", " ", "for", " ", "scalar", " ", "integral", " ", 
      "in", " ", "every", " ", "secs"}], " ", "\[IndentingNewLine]", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"allScalarBin", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"Reverse", "[", "#", "]"}], "&"}], "/@", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"IntegerDigits", "[", 
          RowBox[{"#", ",", "2"}], "]"}], "&"}], "/@", "allsecs"}], ")"}]}]}],
     ";", "\[IndentingNewLine]", 
    RowBox[{"allScalarBin", "=", 
     RowBox[{"allScalarBin", " ", "/.", " ", 
      RowBox[{
       RowBox[{
        RowBox[{"{", "a__", "}"}], " ", "/;", " ", 
        RowBox[{
         RowBox[{"Length", "[", 
          RowBox[{"{", "a", "}"}], "]"}], "<", "12"}]}], "  ", ":>", " ", 
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"{", "a", "}"}], ",", " ", 
         RowBox[{"ConstantArray", "[", 
          RowBox[{"0", ",", 
           RowBox[{"12", "-", 
            RowBox[{"Length", "[", 
             RowBox[{"{", "a", "}"}], "]"}]}]}], "]"}]}], "]"}]}]}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{"All", " ", "top", " ", "ids"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Close", "[", 
     RowBox[{"\"\<./toreduce/\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], 
      "<>", "\"\</kira2reduce.inc\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"tree", " ", "=", "topIds"}], ";", "\[IndentingNewLine]", 
    RowBox[{"toreduce", " ", "=", 
     RowBox[{"Union", "@", 
      RowBox[{"Cases", "[", 
       RowBox[{"intsinfo", ",", " ", 
        RowBox[{"INT", "[", 
         RowBox[{"name", ",", " ", "topt", ",", " ", "a___", ",", 
          RowBox[{"{", "bin___", "}"}]}], "]"}], ",", "\[Infinity]"}], 
       "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"remaining", " ", "=", " ", "intsTopo"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
    "(*", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{
     "Build", " ", "the", " ", "tree", " ", "for", " ", "the", " ", 
      "topology"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"Do", "[", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"j", "=", "2"}], ";"}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"allScalarTree", "=", 
        RowBox[{
         RowBox[{
          RowBox[{"Reverse", "[", "#", "]"}], "&"}], "/@", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"IntegerDigits", "[", 
             RowBox[{"#", ",", "2"}], "]"}], "&"}], "/@", "tree"}], ")"}]}]}],
        ";", " ", 
       RowBox[{"(*", 
        RowBox[{"scalar", " ", "bin", " ", "tree"}], "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"Do", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"allScalarTree", "[", 
           RowBox[{"[", "i", "]"}], "]"}], "=", " ", 
          RowBox[{
           RowBox[{"allScalarTree", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "/.", " ", 
           RowBox[{
            RowBox[{
             RowBox[{"{", "a__", "}"}], " ", "/;", " ", 
             RowBox[{
              RowBox[{"Length", "[", 
               RowBox[{"{", "a", "}"}], "]"}], "<", "12"}]}], "  ", ":>", " ", 
            RowBox[{"Join", "[", 
             RowBox[{
              RowBox[{"{", "a", "}"}], ",", " ", 
              RowBox[{"ConstantArray", "[", 
               RowBox[{"0", ",", 
                RowBox[{"12", "-", 
                 RowBox[{"Length", "[", 
                  RowBox[{"{", "a", "}"}], "]"}]}]}], "]"}]}], "]"}]}]}]}], ",",
          " ", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"Length", "[", "allScalarTree", "]"}]}], "}"}]}], "]"}], ";",
        "\[IndentingNewLine]", 
       RowBox[{"(*", 
        RowBox[{
        "check", " ", "if", " ", "next", " ", "binary", " ", "is", " ", 
         "subset", " ", "of", " ", "any", " ", "binary", " ", "in", " ", 
         "the", " ", "tree"}], "*)"}], "\[IndentingNewLine]", 
       RowBox[{"test", "=", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"IsItSub", "[", 
                RowBox[{
                 RowBox[{"allScalarBin", "[", 
                  RowBox[{"[", "j", "]"}], "]"}], ",", "#"}], "]"}], "&"}], "/@",
               "allScalarTree"}], "//", "Union"}], ")"}], " ", "/.", " ", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"False", ",", " ", "True"}], "}"}], "->", " ", 
            "True"}]}], " ", "/.", " ", 
          RowBox[{
           RowBox[{"{", "False", "}"}], " ", "->", " ", "False"}]}], " ", "/.",
          " ", 
         RowBox[{
          RowBox[{"{", "True", "}"}], "->", " ", "True"}]}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"idtoinclude", "=", 
        RowBox[{"FromDigits", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"Reverse", "[", 
            RowBox[{"allScalarBin", "[", 
             RowBox[{"[", "j", "]"}], "]"}], "]"}], ")"}], ",", "2"}], 
         "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"test", " ", "===", " ", "True"}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"toreduce", " ", "=", " ", 
           RowBox[{"Join", "[", 
            RowBox[{"toreduce", ",", " ", 
             RowBox[{"Union", "@", 
              RowBox[{"Cases", "[", 
               RowBox[{"intsinfo", ",", " ", 
                RowBox[{"INT", "[", 
                 RowBox[{"name", ",", "  ", "a___", ",", "idtoinclude", ",", 
                  RowBox[{"{", "bin___", "}"}]}], "]"}], ",", "\[Infinity]"}],
                "]"}]}]}], "]"}]}], ";"}], ",", 
         RowBox[{"(*", " ", 
          RowBox[{
           RowBox[{"if", " ", "subsector"}], ",", " ", 
           RowBox[{
           "do", " ", "not", " ", "add", " ", "it", " ", "to", " ", "list", " ",
             "of", " ", "sector"}]}], "*)"}], "\[IndentingNewLine]", 
         RowBox[{"(*", " ", 
          RowBox[{
          "else", " ", "add", " ", "it", " ", "to", " ", "the", " ", "tree"}],
           "*)"}], "\[IndentingNewLine]", 
         RowBox[{"(*", 
          RowBox[{
           RowBox[{"Print", "[", 
            
            RowBox[{"\"\<add \>\"", ",", " ", "idtoinclude", ",", 
             " ", "\"\<  tree  \>\"", ",", " ", "tree"}], "]"}], ";"}], 
          "*)"}], "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"tree", " ", "=", " ", 
           RowBox[{"Join", "[", 
            RowBox[{"tree", ",", " ", 
             RowBox[{"{", "idtoinclude", "}"}]}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"toreduce", " ", "=", " ", 
           RowBox[{"Join", "[", 
            RowBox[{"toreduce", ",", " ", 
             RowBox[{"Union", "@", 
              RowBox[{"Cases", "[", 
               RowBox[{"intsinfo", ",", " ", 
                RowBox[{"INT", "[", 
                 RowBox[{"name", ",", "  ", "a___", ",", "idtoinclude", ",", 
                  RowBox[{"{", "bin___", "}"}]}], "]"}], ",", "\[Infinity]"}],
                "]"}]}]}], "]"}]}]}]}], "]"}]}], ",", " ", 
      RowBox[{"{", 
       RowBox[{"j", ",", "1", ",", 
        RowBox[{"Length", "[", "allScalarBin", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{
    "(*", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"End", " ", "tree", " ", "building"}], " ", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
     "Collect", " ", "all", " ", "integrals", " ", "and", " ", "write", " ", 
      "them", " ", "in", " ", "kira", " ", "format"}], "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"kira2reduce", "=", 
     RowBox[{"toreduce", " ", "/.", " ", 
      RowBox[{
       RowBox[{"INT", "[", 
        RowBox[{"name", ",", "a__", ",", 
         RowBox[{"{", "bin__", "}"}]}], "]"}], ":>", 
       RowBox[{"name", "[", "bin", "]"}]}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"tt", "=", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"rr", "=", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "8", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"s", "=", 
       RowBox[{
        RowBox[{"SecToReduce", "[", 
         RowBox[{"[", "topo", "]"}], "]"}], "[", 
        RowBox[{"[", "6", "]"}], "]"}]}], ";"}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"ss", "=", 
     RowBox[{
      RowBox[{"toreduce", " ", "/.", " ", 
       RowBox[{
        RowBox[{"INT", "[", 
         RowBox[{
         "topos_", ",", "t_", ",", "r_", ",", "rank_", ",", "secID_", ",", 
          RowBox[{"{", "bin__", "}"}]}], "]"}], "->", " ", "rank"}]}], "//", 
      "Max"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</trs.m\>\""}], ",", 
      
      RowBox[{"{", 
       RowBox[{"tt", ",", "rr", ",", "ss"}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</tree.m\>\""}], ",",
       "tree"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</toreduce.m\>\""}], 
      ",", " ", "kira2reduce"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"WriteLine", "[", 
       RowBox[{
        RowBox[{"\"\<./toreduce/\>\"", "<>", 
         RowBox[{"ToString", "[", "name", "]"}], 
         "<>", "\"\</kira2reduce.inc\>\""}], ",", " ", 
        RowBox[{"kira2reduce", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "kira2reduce", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", " ", 
    RowBox[{"Print", "[", 
     RowBox[{"\"\<topo \>\"", ",", " ", "topo", ",", " ", "\"\<  /\>\"", ",", 
      " ", 
      RowBox[{"Length", "[", "SecToReduce", "]"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", ",", " ", 
   RowBox[{"{", 
    RowBox[{"topo", ",", "1", ",", 
     RowBox[{"Length", "[", "SecToReduce", "]"}]}], "}"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.973668248627928*^9, 3.97366825034533*^9}, {
   3.973668350589374*^9, 3.9736683602813683`*^9}, {3.973668396973081*^9, 
   3.973668410816408*^9}, 3.973668492455948*^9, 3.973668593698257*^9, 
   3.973668913801051*^9, {3.9736703609025173`*^9, 3.9736704100041924`*^9}, {
   3.9736704839424334`*^9, 3.9736704933032007`*^9}, {3.973670966909769*^9, 
   3.973671013417983*^9}, {3.9736734015826263`*^9, 3.973673570973279*^9}, {
   3.973673716439926*^9, 3.9736737299003363`*^9}, {3.97367377133256*^9, 
   3.973673804188662*^9}, {3.9736738472882338`*^9, 3.973673849708913*^9}, {
   3.9736738884001703`*^9, 3.9736739413004427`*^9}, {3.973673980921627*^9, 
   3.9736739892477627`*^9}, {3.97367660980261*^9, 3.973676609842379*^9}, {
   3.97412516617885*^9, 3.974125167598281*^9}, {3.974125772512809*^9, 
   3.974125777849275*^9}, {3.9741847922686367`*^9, 3.974184799952005*^9}, {
   3.974185111594947*^9, 3.974185121904459*^9}, {3.974185159378675*^9, 
   3.9741852075885363`*^9}, {3.974187924663694*^9, 3.974187944632786*^9}, {
   3.974195482644051*^9, 3.9741955439317093`*^9}, {3.974272262887953*^9, 
   3.9742722683051987`*^9}, {3.974278585473751*^9, 3.9742786257176456`*^9}, {
   3.9742788364177837`*^9, 3.974278875934402*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"f7dbe2b0-af7c-4cd1-a5a9-92c2badb4d1d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Families Config", "Section",
 CellChangeTimes->{{3.9732224208351183`*^9, 
  3.9732224228951406`*^9}},ExpressionUUID->"d0da4265-f6a7-4bc8-976e-\
ad98e4a14e0c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"denoms", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{"on", "-", 
      RowBox[{"shell", " ", "cut", " ", "propagators"}]}], " ", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"DD1", "->", 
      RowBox[{"sp", "[", 
       RowBox[{"r1", ",", "r1"}], "]"}]}], ",", 
     RowBox[{"DD2", "->", 
      RowBox[{"sp", "[", 
       RowBox[{"r2", ",", "r2"}], "]"}]}], ",", 
     RowBox[{"DD3", "->", 
      RowBox[{"sp", "[", 
       RowBox[{"r3", ",", "r3"}], "]"}]}], ",", 
     RowBox[{"DD4", "->", 
      RowBox[{
       RowBox[{"sp", "[", 
        RowBox[{
         RowBox[{"p1", "+", "p2", "+", "r1", "+", "r2", "+", "r3"}], ",", 
         RowBox[{"p1", "+", "p2", "+", "r1", "+", "r2", "+", "r3"}]}], "]"}], 
       "-", "m2"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"cut", " ", "rapidity", " ", "propagator"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"DD5", "->", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"sp", "[", 
          RowBox[{"q", ",", 
           RowBox[{
            RowBox[{"-", "p1"}], "+", 
            RowBox[{"u", " ", "p2"}]}]}], "]"}], "/.", 
         RowBox[{
          RowBox[{"sp", "[", 
           RowBox[{"a_", ",", 
            RowBox[{"u", " ", "b_"}]}], "]"}], ":>", 
          RowBox[{"u", " ", 
           RowBox[{"sp", "[", 
            RowBox[{"a", ",", "b"}], "]"}]}]}]}], "//", "Expand"}], ")"}]}], ",",
      "\[IndentingNewLine]", 
     RowBox[{"DD6", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r1"}], ",", 
        RowBox[{"p1", "+", "r1"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD7", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r1"}], ",", 
        RowBox[{"p2", "+", "r1"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD8", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r2"}], ",", 
        RowBox[{"p1", "+", "r2"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD9", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r2"}], ",", 
        RowBox[{"p2", "+", "r2"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD10", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r3"}], ",", 
        RowBox[{"p1", "+", "r3"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD11", " ", "->", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r3"}], ",", 
        RowBox[{"p2", "+", "r3"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD12", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"r1", "+", "r2"}], ",", 
        RowBox[{"r1", "+", "r2"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD13", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"r2", "+", "r3"}], ",", 
        RowBox[{"r2", "+", "r3"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD14", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"r1", "+", "r3"}], ",", 
        RowBox[{"r1", "+", "r3"}]}], "]"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"DD15", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r1", "+", "r2"}], ",", 
        RowBox[{"p1", "+", "r1", "+", "r2"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD16", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r1", "+", "r2"}], ",", 
        RowBox[{"p2", "+", "r1", "+", "r2"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD17", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r1", "+", "r3"}], ",", 
        RowBox[{"p1", "+", "r1", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD18", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r1", "+", "r3"}], ",", 
        RowBox[{"p2", "+", "r1", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD19", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r2", "+", "r3"}], ",", 
        RowBox[{"p1", "+", "r2", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD20", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r2", "+", "r3"}], ",", 
        RowBox[{"p2", "+", "r2", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD21", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"r1", "+", "r2", "+", "r3"}], ",", 
        RowBox[{"r1", "+", "r2", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD22", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p1", "+", "r1", "+", "r2", "+", "r3"}], ",", 
        RowBox[{"p1", "+", "r1", "+", "r2", "+", "r3"}]}], "]"}]}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"DD23", " ", "->", " ", 
      RowBox[{"sp", "[", 
       RowBox[{
        RowBox[{"p2", "+", "r1", "+", "r2", "+", "r3"}], ",", 
        RowBox[{"p2", "+", "r1", "+", "r2", "+", "r3"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{3.9732224493686037`*^9},
 CellLabel->"In[28]:=",ExpressionUUID->"c5a3d6ae-887f-47a9-a976-a69797e388e4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"familiesall", "=", 
   RowBox[{
   "Import", "[", "\"\<../Families_Identification/Families.m\>\"", "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.97322245142568*^9, 3.973222479253056*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"75053e81-1a22-4b2c-8997-dbfb6210941b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"topo2Fam", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Rule", "[", 
      RowBox[{
       RowBox[{"ToExpression", "[", 
        RowBox[{"\"\<topo\>\"", "<>", 
         RowBox[{"ToString", "[", "i", "]"}]}], "]"}], ",", " ", 
       RowBox[{"fam", "[", "i", "]"}]}], "]"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "300"}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.97367697516374*^9, 3.9736770379011106`*^9}},
 CellLabel->"In[30]:=",ExpressionUUID->"63421b37-41cf-4f0c-bf39-0428a65059da"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"Do", "[", 
   RowBox[{"(*", 
    RowBox[{
     RowBox[{"topo", "=", "1"}], ";"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"name", "=", " ", 
      RowBox[{
       RowBox[{"SecToReduce", "[", 
        RowBox[{"[", "topo", "]"}], "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"CreateDirectory", "[", 
      RowBox[{"\"\<./configs/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</config\>\""}], 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Close", "[", 
      RowBox[{"\"\<./configs/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], 
       "<>", "\"\</config/integralfamilies.yaml\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Open", "[", 
      RowBox[{"\"\<./configs/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], 
       "<>", "\"\</config/integralfamilies.yaml\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"topt", "=", " ", 
      RowBox[{
       RowBox[{"SecToReduce", "[", 
        RowBox[{"[", "topo", "]"}], "]"}], "[", 
       RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"topIds", "=", 
      RowBox[{
       RowBox[{"SecToReduce", "[", 
        RowBox[{"[", "topo", "]"}], "]"}], "[", 
       RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"intsTopo", "=", 
      RowBox[{"Union", "@", 
       RowBox[{"Cases", "[", 
        RowBox[{"intsinfo", ",", " ", 
         RowBox[{"INT", "[", 
          RowBox[{"name", ",", "a___"}], "]"}], ",", "\[Infinity]"}], 
        "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"\"\<doing family \>\"", ",", " ", "name"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"props", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{
           RowBox[{"familiesall", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"name", "/.", " ", "topo2Fam"}], ")"}], "[", 
              RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], " ", "/.", " ", 
           RowBox[{
            RowBox[{"DD", "[", "a_", "]"}], ":>", " ", 
            RowBox[{"ToExpression", "[", 
             RowBox[{"\"\<DD\>\"", "<>", 
              RowBox[{"ToString", "[", "a", "]"}]}], "]"}]}]}], " ", "/.", 
          " ", "denoms"}], ")"}], "[", 
        RowBox[{"[", 
         RowBox[{"2", ",", 
          RowBox[{"6", ";;"}]}], "]"}], "]"}], " ", "/.", " ", 
       RowBox[{
        RowBox[{"sp", "[", 
         RowBox[{"a_", ",", "b_"}], "]"}], "->", " ", "a"}]}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<integralfamilies:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<\\n\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", " ", 
       RowBox[{"\"\<  - name: \\\"\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<\\\"\>\""}]}], 
      "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<    loop_momenta: [ r1, r2, r3]\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<    propagators:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<     - [ \\\" r1 \\\", 0]\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<     - [ \\\" r2 \\\", 0]\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<     - [ \\\" r3 \\\", 0]\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<     - [ \\\" p1+p2+r1+r2+r3 \\\", m2]\>\""}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<     - { bilinear: [ [\\\" p1 + p2 + r1 + r2 + \
r3\\\",\\\"-p1 + u*p2\\\"], 0 ] }\>\""}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"WriteLine", "[", 
         RowBox[{
          RowBox[{"\"\<./configs/\>\"", "<>", 
           RowBox[{"ToString", "[", "name", "]"}], 
           "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", " ", 
          RowBox[{"\"\<     - [ \\\" \>\"", "<>", 
           RowBox[{"ToString", "[", 
            RowBox[{"props", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "]"}], 
           "<>", "\"\< \\\", 0]\>\""}]}], "]"}], ";"}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", 
         RowBox[{"Length", "[", "props", "]"}]}], "}"}]}], 
      "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"WriteLine", "[", 
      RowBox[{
       RowBox[{"\"\<./configs/\>\"", "<>", 
        RowBox[{"ToString", "[", "name", "]"}], 
        "<>", "\"\</config/integralfamilies.yaml\>\""}], ",", 
       " ", "\"\<    cut_propagators: [1,2,3,4,5]\>\""}], "]"}], ";"}], ",", 
    RowBox[{"{", 
     RowBox[{"topo", ",", "1", ",", 
      RowBox[{"Length", "[", "SecToReduce", "]"}]}], "}"}]}], "]"}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.973222480777937*^9, 3.973222548378173*^9}, {
   3.973222587925317*^9, 3.973223108300157*^9}, {3.973247277186285*^9, 
   3.973247307818171*^9}, {3.973676380212597*^9, 3.973676459471292*^9}, {
   3.973676511323402*^9, 3.973676674128592*^9}, {3.973676765317027*^9, 
   3.973676798199626*^9}, {3.973676896706903*^9, 3.973676904459694*^9}, {
   3.9736770510372057`*^9, 3.973677051645836*^9}, 3.974189662924261*^9, 
   3.9742728183614693`*^9},ExpressionUUID->"9fe1628a-4e5c-4aa1-984f-\
bebc98d0ce9a"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.974186523637026*^9, 3.97418653129464*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"80eec487-6f82-47ca-9a00-62f94c7021dd"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.973676875514566*^9, 3.973676875784432*^9}, {
   3.9736770990288877`*^9, 3.973677099197043*^9}, 3.973677308027175*^9},
 CellLabel->
  "In[1012]:=",ExpressionUUID->"5a550a8a-1be4-478a-be5f-b2f2fdbeb26e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"done", " ", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"Do", "[", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"topo", "=", "1"}], ";"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"name", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"name2", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", 
        RowBox[{"topo", "+", "1"}], "]"}], "]"}], "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"name3", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", 
        RowBox[{"topo", "+", "2"}], "]"}], "]"}], "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"done", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{"done", ",", " ", "name"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"done", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{"done", ",", " ", "name2"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"done", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{"done", ",", " ", "name3"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"path", " ", "=", 
     RowBox[{"\"\<./configs_grouped/\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<_\>\"", "<>", 
      RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<_\>\"", "<>", 
      RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\</config\>\""}]}], ";",
     "\[IndentingNewLine]", 
    RowBox[{"CreateDirectory", "[", "path", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"topt", "=", " ", 
       RowBox[{
        RowBox[{"SecToReduce", "[", 
         RowBox[{"[", "topo", "]"}], "]"}], "[", 
        RowBox[{"[", "3", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"topIds", "=", 
       RowBox[{
        RowBox[{"SecToReduce", "[", 
         RowBox[{"[", "topo", "]"}], "]"}], "[", 
        RowBox[{"[", "4", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"intsTopo", "=", 
       RowBox[{"Union", "@", 
        RowBox[{"Cases", "[", 
         RowBox[{"intsinfo", ",", " ", 
          RowBox[{"INT", "[", 
           RowBox[{"name", ",", "a___"}], "]"}], ",", "\[Infinity]"}], 
         "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"\"\<doing family \>\"", ",", " ", "name"}], "]"}], ";"}], 
     "*)"}], "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<integralfamilies:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<\\n\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"props", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"familiesall", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"name", "/.", " ", "topo2Fam"}], ")"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], " ", "/.", " ", 
          RowBox[{
           RowBox[{"DD", "[", "a_", "]"}], ":>", " ", 
           RowBox[{"ToExpression", "[", 
            RowBox[{"\"\<DD\>\"", "<>", 
             RowBox[{"ToString", "[", "a", "]"}]}], "]"}]}]}], " ", "/.", " ",
          "denoms"}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", 
         RowBox[{"6", ";;"}]}], "]"}], "]"}], " ", "/.", " ", 
      RowBox[{
       RowBox[{"sp", "[", 
        RowBox[{"a_", ",", "b_"}], "]"}], "->", " ", "a"}]}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
      RowBox[{"\"\<  - name: \\\"\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<\\\"\>\""}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    loop_momenta: [ r1, r2, r3]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    propagators:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r1 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r2 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r3 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" p1+p2+r1+r2+r3 \\\", m2]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - { bilinear: [ [\\\" - p1 - p2 - r1 - r2 - \
r3\\\",\\\"-p1 + u*p2\\\"], 0 ] }\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"WriteLine", "[", 
        RowBox[{
         RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
         RowBox[{"\"\<     - [ \\\" \>\"", "<>", 
          RowBox[{"ToString", "[", 
           RowBox[{"props", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], 
          "<>", "\"\< \\\", 0]\>\""}]}], "]"}], ";"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "props", "]"}]}], "}"}]}], 
     "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    cut_propagators: [1,2,3,4,5]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", "second", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<\\n\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"props", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"familiesall", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"name2", "/.", " ", "topo2Fam"}], ")"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], " ", "/.", " ", 
          RowBox[{
           RowBox[{"DD", "[", "a_", "]"}], ":>", " ", 
           RowBox[{"ToExpression", "[", 
            RowBox[{"\"\<DD\>\"", "<>", 
             RowBox[{"ToString", "[", "a", "]"}]}], "]"}]}]}], " ", "/.", " ",
          "denoms"}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", 
         RowBox[{"6", ";;"}]}], "]"}], "]"}], " ", "/.", " ", 
      RowBox[{
       RowBox[{"sp", "[", 
        RowBox[{"a_", ",", "b_"}], "]"}], "->", " ", "a"}]}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
      RowBox[{"\"\<  - name: \\\"\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<\\\"\>\""}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    loop_momenta: [ r1, r2, r3]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    propagators:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r1 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r2 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r3 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" p1+p2+r1+r2+r3 \\\", m2]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - { bilinear: [ [\\\" - p1 - p2 - r1 - r2 - \
r3\\\",\\\"-p1 + u*p2\\\"], 0 ] }\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"WriteLine", "[", 
        RowBox[{
         RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
         RowBox[{"\"\<     - [ \\\" \>\"", "<>", 
          RowBox[{"ToString", "[", 
           RowBox[{"props", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], 
          "<>", "\"\< \\\", 0]\>\""}]}], "]"}], ";"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "props", "]"}]}], "}"}]}], 
     "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    cut_propagators: [1,2,3,4,5]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "third", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<\\n\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"props", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"familiesall", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"name3", "/.", " ", "topo2Fam"}], ")"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], " ", "/.", " ", 
          RowBox[{
           RowBox[{"DD", "[", "a_", "]"}], ":>", " ", 
           RowBox[{"ToExpression", "[", 
            RowBox[{"\"\<DD\>\"", "<>", 
             RowBox[{"ToString", "[", "a", "]"}]}], "]"}]}]}], " ", "/.", " ",
          "denoms"}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", 
         RowBox[{"6", ";;"}]}], "]"}], "]"}], " ", "/.", " ", 
      RowBox[{
       RowBox[{"sp", "[", 
        RowBox[{"a_", ",", "b_"}], "]"}], "->", " ", "a"}]}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
      RowBox[{"\"\<  - name: \\\"\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<\\\"\>\""}]}], 
     "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    loop_momenta: [ r1, r2, r3]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    propagators:\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r1 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r2 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r3 \\\", 0]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" p1+p2+r1+r2+r3 \\\", m2]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - { bilinear: [ [\\\" - p1 - p2 - r1 - r2 - \
r3\\\",\\\"-p1 + u*p2\\\"], 0 ] }\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"WriteLine", "[", 
        RowBox[{
         RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
         RowBox[{"\"\<     - [ \\\" \>\"", "<>", 
          RowBox[{"ToString", "[", 
           RowBox[{"props", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], 
          "<>", "\"\< \\\", 0]\>\""}]}], "]"}], ";"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "props", "]"}]}], "}"}]}], 
     "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    cut_propagators: [1,2,3,4,5]\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"collect", " ", "integrals"}], "\[IndentingNewLine]", 
     "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"toreduce1", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</toreduce.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"toreduce2", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\</toreduce.m\>\""}],
       "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"toreduce3", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\</toreduce.m\>\""}],
       "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"tree1", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</tree.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"tree2", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\</tree.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"tree3", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\</tree.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"tt1", ",", "rr1", ",", "ss1"}], "}"}], "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</trs.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"tt2", ",", "rr2", ",", "ss2"}], "}"}], "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\</trs.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"tt3", ",", "rr3", ",", "ss3"}], "}"}], "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\</trs.m\>\""}], 
      "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"path", " ", "=", 
     RowBox[{"\"\<./configs_grouped/\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<_\>\"", "<>", 
      RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<_\>\"", "<>", 
      RowBox[{"ToString", "[", "name3", "]"}]}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"CreateDirectory", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/\>\""}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</tree_\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.m\>\""}], ",", 
      "tree1"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</tree_\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.m\>\""}], ",", 
      "tree2"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</tree_\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.m\>\""}], ",", 
      "tree3"}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</trs_\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.m\>\""}], ",", 
      RowBox[{"{", 
       RowBox[{"tt1", ",", "rr1", ",", "ss1"}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</trs_\>\"", "<>", 
       RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.m\>\""}], ",", 
      RowBox[{"{", 
       RowBox[{"tt2", ",", "rr2", ",", "ss2"}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</trs_\>\"", "<>", 
       RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.m\>\""}], ",", 
      RowBox[{"{", 
       RowBox[{"tt3", ",", "rr3", ",", "ss3"}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], "]"}], ";",
     "\[IndentingNewLine]", 
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], "]"}], ";",
     "\[IndentingNewLine]", 
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"WriteLine", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
         RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], ",", 
        " ", 
        RowBox[{"toreduce1", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "toreduce1", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"WriteLine", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
         RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.inc\>\""}], ",",
         " ", 
        RowBox[{"toreduce2", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "toreduce2", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"WriteLine", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
         RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.inc\>\""}], ",",
         " ", 
        RowBox[{"toreduce3", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "toreduce3", "]"}]}], "}"}]}], "]"}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"(*", "\[IndentingNewLine]", 
     RowBox[{"reduce", " ", "job"}], "\[IndentingNewLine]", "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"job", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./reduction_files_setup/jobs_reduce_for_amplitude.yaml\>\"",
        ",", "\"\<Text\>\""}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"kinematics", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./reduction_files_setup/kinematics.yaml\>\"", 
       ",", "\"\<Text\>\""}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{"Apply", " ", "regex", " ", "replacement"}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{"newjob", "=", 
     RowBox[{"StringReplace", "[", 
      RowBox[{"job", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&toponame1\>\"", "]"}], "->", 
          RowBox[{"ToString", "[", "name", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&sectorlist1\>\"", "]"}], "->", 
          RowBox[{"StringReplace", "[", 
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{
              RowBox[{"ToString", "[", "tree1", "]"}], ",", " ", 
              RowBox[{"\"\<{\>\"", " ", "->", "\"\<\>\""}]}], "]"}], " ", ",", 
            RowBox[{"\"\<}\>\"", " ", "->", "\"\<\>\""}]}], " ", "]"}]}], ",",
          " ", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&rr1\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "rr1", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&ss1\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "ss1", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&kira2reduce1\>\"", "]"}], "->",
           " ", 
          RowBox[{"ToString", "[", 
           RowBox[{"\"\<toreduce/kira2reduce\>\"", "<>", 
            RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], 
           "]"}]}]}], " ", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"newjob", "=", 
     RowBox[{"StringReplace", "[", 
      RowBox[{"newjob", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&toponame2\>\"", "]"}], "->", 
          RowBox[{"ToString", "[", "name2", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&sectorlist2\>\"", "]"}], "->", 
          RowBox[{"StringReplace", "[", 
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{
              RowBox[{"ToString", "[", "tree2", "]"}], ",", " ", 
              RowBox[{"\"\<{\>\"", " ", "->", "\"\<\>\""}]}], "]"}], " ", ",", 
            RowBox[{"\"\<}\>\"", " ", "->", "\"\<\>\""}]}], " ", "]"}]}], ",",
          " ", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&rr2\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "rr2", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&ss2\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "ss2", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&kira2reduce2\>\"", "]"}], "->",
           " ", 
          RowBox[{"ToString", "[", 
           RowBox[{"\"\<toreduce/kira2reduce\>\"", "<>", 
            RowBox[{"ToString", "[", "name2", "]"}], "<>", "\"\<.inc\>\""}], 
           "]"}]}]}], "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"newjob", "=", 
     RowBox[{"StringReplace", "[", 
      RowBox[{"newjob", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&toponame3\>\"", "]"}], "->", 
          RowBox[{"ToString", "[", "name3", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&sectorlist3\>\"", "]"}], "->", 
          RowBox[{"StringReplace", "[", 
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{
              RowBox[{"ToString", "[", "tree3", "]"}], ",", " ", 
              RowBox[{"\"\<{\>\"", " ", "->", "\"\<\>\""}]}], "]"}], " ", ",", 
            RowBox[{"\"\<}\>\"", " ", "->", "\"\<\>\""}]}], " ", "]"}]}], ",",
          " ", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&rr3\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "rr3", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&ss3\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "ss3", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&kira2reduce3\>\"", "]"}], "->",
           " ", 
          RowBox[{"ToString", "[", 
           RowBox[{"\"\<toreduce/kira2reduce\>\"", "<>", 
            RowBox[{"ToString", "[", "name3", "]"}], "<>", "\"\<.inc\>\""}], 
           "]"}]}]}], "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</reduce_job.yaml\>\""}], ",", "newjob", 
      ",", "\"\<Text\>\""}], "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</config/kinematics.yaml\>\""}], ",", 
      "kinematics", ",", "\"\<Text\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
   RowBox[{
   "(*", "\[IndentingNewLine]", "iterator", "\[IndentingNewLine]", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{"{", 
    RowBox[{"topo", ",", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"Subdivide", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"Length", "[", "SecToReduce", "]"}], "-", "1"}], ",", 
           "49"}], "]"}], "+", "1"}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{";;", 
         RowBox[{"-", "2"}]}], "]"}], "]"}], ")"}]}], "}"}]}], 
  "]"}]}], "Input",
 CellChangeTimes->{{3.974186666263813*^9, 3.974186845205111*^9}, {
   3.974186923513831*^9, 3.974187058744709*^9}, {3.974187227143312*^9, 
   3.974187233216679*^9}, {3.9741873162247887`*^9, 3.974187325093499*^9}, {
   3.974187434411213*^9, 3.974187485871297*^9}, {3.9741875446036177`*^9, 
   3.974187545315736*^9}, {3.974187589081078*^9, 3.974187604979362*^9}, {
   3.974189727605942*^9, 3.974189894453745*^9}, {3.974189933097234*^9, 
   3.974189943273918*^9}, {3.974190008069745*^9, 3.974190022988688*^9}, {
   3.9741901250679483`*^9, 3.9741901344239187`*^9}, {3.97419030359613*^9, 
   3.974190501890294*^9}, {3.974190660163248*^9, 3.97419066137346*^9}, {
   3.974191276597632*^9, 3.974191282164694*^9}, {3.9741921762363577`*^9, 
   3.974192262037818*^9}, 3.974192445083809*^9, {3.974193042132943*^9, 
   3.974193067413424*^9}, 3.9741959202215643`*^9, 3.974196033273999*^9, {
   3.977197690056288*^9, 3.977197710521167*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"15f2901f-05c0-4df6-ae26-dace804f4045"],

Cell[BoxData[
 TemplateBox[{
  "CreateDirectory", "eexist", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"/Users/cesarecarlomella/Desktop/Physics/\
Oxford/projects/DY/N3LO/RRR/reduction.setup/configs_grouped/topo1_topo10_\
topo100/config\\\\\\\"\\\"}]\\) already exists.\"", 2, 32, 5, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049076891*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"a7144a06-cf1b-4a04-b343-97ae8f3e36ff"],

Cell[BoxData[
 TemplateBox[{
  "General", "openx", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"./configs_grouped/topo1_topo10_topo100/\
config/integralfamilies.yaml\\\\\\\"\\\"}]\\) is not open.\"", 2, 32, 6, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049080141*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"9e63a012-c256-49bc-9d81-65491741ac49"],

Cell[BoxData[
 TemplateBox[{
  "CreateDirectory", "eexist", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"/Users/cesarecarlomella/Desktop/Physics/\
Oxford/projects/DY/N3LO/RRR/reduction.setup/configs_grouped/topo1_topo10_\
topo100/toreduce/\\\\\\\"\\\"}]\\) already exists.\"", 2, 32, 7, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049126788*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"7b26720f-74c7-4a3b-b7ba-c77aef2b885b"],

Cell[BoxData[
 TemplateBox[{
  "General", "openx", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"./configs_grouped/topo1_topo10_topo100/\
toreduce/kira2reducetopo1.inc\\\\\\\"\\\"}]\\) is not open.\"", 2, 32, 8, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049131954*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"8bdd8842-0e7f-43e7-bc22-982c930ffda1"],

Cell[BoxData[
 TemplateBox[{
  "General", "openx", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"./configs_grouped/topo1_topo10_topo100/\
toreduce/kira2reducetopo10.inc\\\\\\\"\\\"}]\\) is not open.\"", 2, 32, 9, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049155892*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"b4b924dc-acb5-4298-8ff7-08159c96605c"],

Cell[BoxData[
 TemplateBox[{
  "General", "stop", 
   "\"Further output of \\!\\(\\*StyleBox[RowBox[{\\\"General\\\", \
\\\"::\\\", \\\"openx\\\"}], \\\"MessageName\\\"]\\) will be suppressed \
during this calculation.\"", 2, 32, 10, 22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.9771980491577673`*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"9255f8d9-16a3-487b-8f0d-bd8962ad77df"],

Cell[BoxData[
 TemplateBox[{
  "CreateDirectory", "eexist", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"/Users/cesarecarlomella/Desktop/Physics/\
Oxford/projects/DY/N3LO/RRR/reduction.setup/configs_grouped/topo101_topo102_\
topo103/config\\\\\\\"\\\"}]\\) already exists.\"", 2, 32, 11, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198049220525*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"489d5adb-2efc-48d0-9622-0309ca1dd810"],

Cell[BoxData[
 TemplateBox[{
  "General", "stop", 
   "\"Further output of \\!\\(\\*StyleBox[RowBox[{\\\"CreateDirectory\\\", \\\
\"::\\\", \\\"eexist\\\"}], \\\"MessageName\\\"]\\) will be suppressed during \
this calculation.\"", 2, 32, 12, 22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.9771980492226562`*^9},
 CellLabel->
  "During evaluation of \
In[31]:=",ExpressionUUID->"19589a8c-006d-4d46-8dfd-41fc8a40e9fb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"topo", "=", 
     RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"name", "=", " ", 
     RowBox[{
      RowBox[{"SecToReduce", "[", 
       RowBox[{"[", "topo", "]"}], "]"}], "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"done", " ", "=", " ", 
     RowBox[{"Append", "[", 
      RowBox[{"done", ",", " ", "name"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"path", " ", "=", 
     RowBox[{"\"\<./configs_grouped/\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</config\>\""}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CreateDirectory", "[", "path", "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<integralfamilies:\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<\\n\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"props", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"familiesall", "[", 
           RowBox[{"[", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"name", "/.", " ", "topo2Fam"}], ")"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], " ", "/.", " ", 
          RowBox[{
           RowBox[{"DD", "[", "a_", "]"}], ":>", " ", 
           RowBox[{"ToExpression", "[", 
            RowBox[{"\"\<DD\>\"", "<>", 
             RowBox[{"ToString", "[", "a", "]"}]}], "]"}]}]}], " ", "/.", " ",
          "denoms"}], ")"}], "[", 
       RowBox[{"[", 
        RowBox[{"2", ",", 
         RowBox[{"6", ";;"}]}], "]"}], "]"}], " ", "/.", " ", 
      RowBox[{
       RowBox[{"sp", "[", 
        RowBox[{"a_", ",", "b_"}], "]"}], "->", " ", "a"}]}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
      RowBox[{"\"\<  - name: \\\"\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<\\\"\>\""}]}], 
     "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    loop_momenta: [ r1, r2, r3]\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    propagators:\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r1 \\\", 0]\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r2 \\\", 0]\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" r3 \\\", 0]\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - [ \\\" p1+p2+r1+r2+r3 \\\", m2]\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<     - { bilinear: [ [\\\" - p1 - p2 - r1 - r2 - \
r3\\\",\\\"-p1 + u*p2\\\"], 0 ] }\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"WriteLine", "[", 
        RowBox[{
         RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", " ", 
         RowBox[{"\"\<     - [ \\\" \>\"", "<>", 
          RowBox[{"ToString", "[", 
           RowBox[{"props", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], 
          "<>", "\"\< \\\", 0]\>\""}]}], "]"}], ";"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "props", "]"}]}], "}"}]}], 
     "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"WriteLine", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</integralfamilies.yaml\>\""}], ",", 
      " ", "\"\<    cut_propagators: [1,2,3,4,5]\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"collect", " ", "integrals"}], "\[IndentingNewLine]", 
    "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"toreduce1", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</toreduce.m\>\""}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"tree1", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</tree.m\>\""}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{"tt1", ",", "rr1", ",", "ss1"}], "}"}], "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./toreduce/\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\</trs.m\>\""}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"path", " ", "=", 
     RowBox[{"\"\<./configs_grouped/\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}]}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"CreateDirectory", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</tree_\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.m\>\""}], ",", 
      "tree1"}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</trs_\>\"", "<>", 
       RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.m\>\""}], ",", 
      RowBox[{"{", 
       RowBox[{"tt1", ",", "rr1", ",", "ss1"}], "}"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Close", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Open", "[", 
     RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
      RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", 
     RowBox[{
      RowBox[{"WriteLine", "[", 
       RowBox[{
        RowBox[{"path", "<>", "\"\</toreduce/kira2reduce\>\"", "<>", 
         RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], ",", 
        " ", 
        RowBox[{"toreduce1", "[", 
         RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "toreduce1", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{"reduce", " ", "job"}], "\[IndentingNewLine]", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"job", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./reduction_files_setup/jobs_reduce_for_amplitude.yaml\>\"",
        ",", "\"\<Text\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"kinematics", "=", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./reduction_files_setup/kinematics.yaml\>\"", 
       ",", "\"\<Text\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"Apply", " ", "regex", " ", "replacement"}], "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"newjob", "=", 
     RowBox[{"StringReplace", "[", 
      RowBox[{"job", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&toponame1\>\"", "]"}], "->", 
          RowBox[{"ToString", "[", "name", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&sectorlist1\>\"", "]"}], "->", 
          RowBox[{"StringReplace", "[", 
           RowBox[{
            RowBox[{"StringReplace", "[", 
             RowBox[{
              RowBox[{"ToString", "[", "tree1", "]"}], ",", " ", 
              RowBox[{"\"\<{\>\"", " ", "->", "\"\<\>\""}]}], "]"}], " ", ",", 
            RowBox[{"\"\<}\>\"", " ", "->", "\"\<\>\""}]}], " ", "]"}]}], ",",
          " ", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&rr1\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "rr1", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&ss1\>\"", "]"}], "->", " ", 
          
          RowBox[{"ToString", "[", "ss1", "]"}]}], ",", 
         RowBox[{
          RowBox[{"RegularExpression", "[", "\"\<&kira2reduce1\>\"", "]"}], "->",
           " ", 
          RowBox[{"ToString", "[", 
           RowBox[{"\"\<toreduce/kira2reduce\>\"", "<>", 
            RowBox[{"ToString", "[", "name", "]"}], "<>", "\"\<.inc\>\""}], 
           "]"}]}]}], " ", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</reduce_job.yaml\>\""}], ",", "newjob", 
      ",", "\"\<Text\>\""}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"path", "<>", "\"\</config/kinematics.yaml\>\""}], ",", 
      "kinematics", ",", "\"\<Text\>\""}], "]"}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.974196044978498*^9, 3.9741961405866737`*^9}, {
  3.9771977326235437`*^9, 3.97719773783189*^9}},
 CellLabel->"In[33]:=",ExpressionUUID->"18a62e74-6071-4cd7-9688-b40b242379dc"],

Cell[BoxData[
 TemplateBox[{
  "CreateDirectory", "eexist", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"/Users/cesarecarlomella/Desktop/Physics/\
Oxford/projects/DY/N3LO/RRR/reduction.setup/configs_grouped/topo99/config\\\\\
\\\"\\\"}]\\) already exists.\"", 2, 37, 13, 22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198092594285*^9},
 CellLabel->
  "During evaluation of \
In[33]:=",ExpressionUUID->"8dde0171-2727-4680-ab0d-21d838a39176"],

Cell[BoxData[
 TemplateBox[{
  "General", "openx", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"./configs_grouped/topo99/config/\
integralfamilies.yaml\\\\\\\"\\\"}]\\) is not open.\"", 2, 38, 14, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198092597698*^9},
 CellLabel->
  "During evaluation of \
In[33]:=",ExpressionUUID->"d8b2ce25-a0ac-4d21-ab18-32342c86605d"],

Cell[BoxData[
 TemplateBox[{
  "CreateDirectory", "eexist", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"/Users/cesarecarlomella/Desktop/Physics/\
Oxford/projects/DY/N3LO/RRR/reduction.setup/configs_grouped/topo99/toreduce/\\\
\\\\\"\\\"}]\\) already exists.\"", 2, 57, 15, 22004634525678730603, "Local"},
  
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.9771980926200333`*^9},
 CellLabel->
  "During evaluation of \
In[33]:=",ExpressionUUID->"dc5d2f25-d8f2-45f5-af30-ef9bd7958c2e"],

Cell[BoxData[
 TemplateBox[{
  "General", "openx", 
   "\"\\!\\(\\*RowBox[{\\\"\\\\\\\"./configs_grouped/topo99/toreduce/\
kira2reducetopo99.inc\\\\\\\"\\\"}]\\) is not open.\"", 2, 60, 16, 
   22004634525678730603, "Local"},
  "MessageTemplate",
  BaseStyle->"MSG"]], "Message",
 CellChangeTimes->{3.977198092622678*^9},
 CellLabel->
  "During evaluation of \
In[33]:=",ExpressionUUID->"a8430497-5fb3-49c8-81b9-9fa80262b2d2"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1443, 1387},
WindowMargins->{{Automatic, -1444}, {Automatic, -13}},
Magnification:>1.25 Inherited,
FrontEndVersion->"14.2 for Mac OS X ARM (64-bit) (March 16, 2025)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"5ca6cc8f-090d-4132-8ffd-44451801eaff"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[554, 20, 179, 3, 36, "Input",ExpressionUUID->"0b1271bb-c5e2-4749-a7a4-3f35d89a1ef2"],
Cell[CellGroupData[{
Cell[758, 27, 250, 4, 36, "Input",ExpressionUUID->"ca267460-4739-4a6b-b810-60c4cac8ad60"],
Cell[1011, 33, 577, 8, 41, "Output",ExpressionUUID->"8d3de2d4-10b1-4ca0-a46a-05130a97d239"]
}, Open  ]],
Cell[1603, 44, 649, 16, 62, "Input",ExpressionUUID->"588de2b0-55e9-4371-8d18-14ee09532de5"],
Cell[2255, 62, 338, 8, 36, "Input",ExpressionUUID->"22b86a2c-7dcb-4812-990b-c880bbe4926a"],
Cell[CellGroupData[{
Cell[2618, 74, 1905, 53, 189, "Input",ExpressionUUID->"17e54193-4ed6-4ba6-9f5f-b0f092c175ab"],
Cell[4526, 129, 354, 6, 41, "Output",ExpressionUUID->"2444b787-00d3-4150-bf49-4ecd90cd9c22"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4917, 140, 251, 4, 36, "Input",ExpressionUUID->"4e100180-8911-4c9e-9e7e-07717dd1a922"],
Cell[5171, 146, 392, 5, 41, "Output",ExpressionUUID->"b380f979-2cf7-4c8d-ba4e-0099de3b8acf"]
}, Open  ]],
Cell[5578, 154, 1052, 26, 138, "Input",ExpressionUUID->"6970f6d5-bde2-4d4a-9008-16f12132da37"],
Cell[6633, 182, 398, 10, 36, "Input",ExpressionUUID->"f91b01ff-eb4c-4127-a531-b969ca9b5ac7"],
Cell[7034, 194, 1766, 46, 138, "Input",ExpressionUUID->"c638c7c8-d77f-42b3-a601-eb3fe57c4b5c"],
Cell[8803, 242, 154, 3, 36, "Input",ExpressionUUID->"f2daea87-329a-4878-a91c-cd395541af64"],
Cell[8960, 247, 4020, 106, 292, "Input",ExpressionUUID->"2ed4a951-93d7-4ec5-8b41-d389f64891b2"],
Cell[CellGroupData[{
Cell[13005, 357, 262, 5, 36, "Input",ExpressionUUID->"ba2436c4-3e66-440c-9a28-fb9de6aab37a"],
Cell[13270, 364, 493, 10, 41, "Output",ExpressionUUID->"c40e3338-4632-4e1c-b889-4188a4c5d5ac"]
}, Open  ]],
Cell[CellGroupData[{
Cell[13800, 379, 1061, 26, 87, "Input",ExpressionUUID->"1fc03a5d-3e42-4481-99ee-ccee6ac6be11"],
Cell[14864, 407, 481, 7, 41, "Output",ExpressionUUID->"15a39fa8-da04-44ab-9794-f3527337c3bd"],
Cell[15348, 416, 479, 7, 41, "Output",ExpressionUUID->"d46a264d-db51-47f0-94c5-7ed4489b3cc2"],
Cell[15830, 425, 478, 7, 41, "Output",ExpressionUUID->"fceb7096-5dd0-4e85-82a4-a5d0c7ba3393"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16345, 437, 265, 4, 36, "Input",ExpressionUUID->"88b19004-5f0b-42db-b273-09173a58c2b1"],
Cell[16613, 443, 462, 7, 41, "Output",ExpressionUUID->"96466d48-586f-4b7b-90b0-d37b691c2849"]
}, Open  ]],
Cell[17090, 453, 3826, 89, 394, "Input",ExpressionUUID->"7f001aba-1218-479e-97ce-b98e84d923a2"],
Cell[CellGroupData[{
Cell[20941, 546, 218, 2, 62, "Input",ExpressionUUID->"bfee7ce4-2033-4e53-a6b6-e988e694595e"],
Cell[21162, 550, 475, 7, 41, "Output",ExpressionUUID->"8baa390f-026e-4ed9-a4dd-0f75407ec848"],
Cell[21640, 559, 475, 7, 41, "Output",ExpressionUUID->"a99d9abe-80d8-442e-9544-b35e3b5c405d"]
}, Open  ]],
Cell[22130, 569, 1006, 27, 138, "Input",ExpressionUUID->"2c7c031f-caa4-4a50-8b37-f1c9f4b7d3c0"],
Cell[CellGroupData[{
Cell[23161, 600, 214, 3, 36, "Input",ExpressionUUID->"d8b7749a-1880-42c5-b8bd-e8c66d8a008b"],
Cell[23378, 605, 461, 6, 41, "Output",ExpressionUUID->"5a6b6188-1027-4b6a-ab04-26ee5c9ee19c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[23876, 616, 229, 4, 82, "Section",ExpressionUUID->"445a1698-4636-47e3-ada9-a1f23decddde"],
Cell[24108, 622, 14003, 336, 1645, "Input",ExpressionUUID->"f7dbe2b0-af7c-4cd1-a5a9-92c2badb4d1d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[38148, 963, 164, 3, 82, "Section",ExpressionUUID->"d0da4265-f6a7-4bc8-976e-ad98e4a14e0c"],
Cell[38315, 968, 5478, 145, 623, "Input",ExpressionUUID->"c5a3d6ae-887f-47a9-a976-a69797e388e4"],
Cell[43796, 1115, 306, 7, 36, "Input",ExpressionUUID->"75053e81-1a22-4b2c-8997-dbfb6210941b"],
Cell[44105, 1124, 576, 14, 36, "Input",ExpressionUUID->"63421b37-41cf-4f0c-bf39-0428a65059da"],
Cell[44684, 1140, 7456, 175, 700, "Input",ExpressionUUID->"9fe1628a-4e5c-4aa1-984f-bebc98d0ce9a"],
Cell[52143, 1317, 170, 2, 36, "Input",ExpressionUUID->"80eec487-6f82-47ca-9a00-62f94c7021dd"],
Cell[52316, 1321, 250, 4, 36, "Input",ExpressionUUID->"5a550a8a-1be4-478a-be5f-b2f2fdbeb26e"],
Cell[CellGroupData[{
Cell[52591, 1329, 28314, 660, 2998, "Input",ExpressionUUID->"15f2901f-05c0-4df6-ae26-dace804f4045"],
Cell[80908, 1991, 511, 12, 32, "Message",ExpressionUUID->"a7144a06-cf1b-4a04-b343-97ae8f3e36ff"],
Cell[81422, 2005, 437, 11, 32, "Message",ExpressionUUID->"9e63a012-c256-49bc-9d81-65491741ac49"],
Cell[81862, 2018, 514, 12, 32, "Message",ExpressionUUID->"7b26720f-74c7-4a3b-b7ba-c77aef2b885b"],
Cell[82379, 2032, 438, 11, 32, "Message",ExpressionUUID->"8bdd8842-0e7f-43e7-bc22-982c930ffda1"],
Cell[82820, 2045, 439, 11, 32, "Message",ExpressionUUID->"b4b924dc-acb5-4298-8ff7-08159c96605c"],
Cell[83262, 2058, 468, 11, 32, "Message",ExpressionUUID->"9255f8d9-16a3-487b-8f0d-bd8962ad77df"],
Cell[83733, 2071, 515, 12, 32, "Message",ExpressionUUID->"489d5adb-2efc-48d0-9622-0309ca1dd810"],
Cell[84251, 2085, 477, 11, 32, "Message",ExpressionUUID->"19589a8c-006d-4d46-8dfd-41fc8a40e9fb"]
}, Open  ]],
Cell[CellGroupData[{
Cell[84765, 2101, 10632, 259, 1313, "Input",ExpressionUUID->"18a62e74-6071-4cd7-9688-b40b242379dc"],
Cell[95400, 2362, 494, 11, 32, "Message",ExpressionUUID->"8dde0171-2727-4680-ab0d-21d838a39176"],
Cell[95897, 2375, 424, 11, 32, "Message",ExpressionUUID->"d8b2ce25-a0ac-4d21-ab18-32342c86605d"],
Cell[96324, 2388, 502, 12, 32, "Message",ExpressionUUID->"dc5d2f25-d8f2-45f5-af30-ef9bd7958c2e"],
Cell[96829, 2402, 426, 11, 32, "Message",ExpressionUUID->"a8430497-5fb3-49c8-81b9-9fa80262b2d2"]
}, Open  ]]
}, Open  ]]
}
]
*)

