#-
#include all_header.h
#include ../../../process_header.h



TableBase "../../../external/reduction_table.tbl" open;
TableBase "../../../external/reduction_table.tbl" load NewINT;

L exp=S1;
.sort

#include ../../layers/&layer&/&folder&/FF&ff&/S1TBase.ff

#do i = 1,1
TestUse NewINT;
.sort
TableBase "../../../external/reduction_table.tbl" use;
Apply;
if ( count(tbl_,1) ) Redefine i "0";
.sort
#enddo

id INT(PL?, x1?, x2?, x3?, x4?, [], ?x) = INT(PL, ?x);
id NewINT(?x) = INT(?x);
.sort

b CMetric,gem,T,lambda,s, f, i_, gs,eq,INT,Den,Num, BASISLC;
.sort
Collect Num;
id Num(n1?) = Ratio(n1,1);
id Den(n1?) = Ratio(1,n1);
.sort
Polyratfun Ratio;
.sort
Polyratfun;
.sort

id Ratio(n1?, n2?) = Num(n1) * Den(n2);

factarg Num;
factarg Den;

chainout Num;
chainout Den;
.sort
repeat id Den(n1?number_) = 1/n1;
repeat id Den(n1?symbol_) = 1/n1;
repeat id Num(n1?number_) = n1;
repeat id Num(n1?symbol_) = n1;
.sort




#opendictionary mth
#add pi_: "Pi"
#add i_: "I"
#add Z: "Zeta"
*#add d_: "Metric"
#closedictionary
#usedictionary mth

format mathematica;
b T,lambda,s,f,gs,eq,INT,Den,Num, BASISLC;
.sort
#write <../../layers/&layer&/&folder&/FF&ff&/S1_reduced.ff> "FF[&ff&][&layer&] = %e" exp;
#+
.end