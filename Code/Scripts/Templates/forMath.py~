from common import *
from pynman.form_helpers import *

dic, _ = get_unique_momenta()

print(dic)

with open(forminput, 'r') as f:
    content = f.read()
p_props = gather_external_moms(content)


with open('tmp/input.m', 'w') as f:
    f.write("input = {")
    for fam, vals in intfams.items():
        for perm, swap in permutations.items():
            f.write(f'{fam}{perm} -> {{\n')
            for ct, val in enumerate(vals):
                perval = permute(val, swap)
                representative = [k for k in dic.keys() if perval in dic[k]][0]
                f.write(f"{{{representative}, {make_word(representative)}}}")
                if ct < len(vals)-1:
                    f.write(',\n')
            f.write(f'}},\n\n')
        f.write(f'external -> {{\n')
    for ct, p in enumerate(p_props):
        representative = [k for k in dic.keys() if p in dic[k]][0]
        f.write(f"{{{representative}, {make_word(representative)}}}")
        if ct < len(p_props)-1:
            f.write(',\n')
    f.write(f'}}\n')
    f.write("};")


print(p_props)
